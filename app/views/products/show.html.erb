<% @body_class = 'product-details' %>

<h1><%= @product.name %></h1>

<div id="product-images">
  <div id="main-image">
		<%= render :partial => 'image' -%>
  </div>
  <div id="thumbnails">
    <%= render :partial => 'thumbnails', :locals => {:product => @product} -%>
  </div>
</div>

<div id="product-description">
  <%= product_description(@product) %>
</div>

<div id="cart-form">
<% form_for :order, :url => orders_url do |f| %>

  <% if product_price(@product) %>
  <p class="prices">
    <%= t("price") %>
    <span class="price selling"><%= product_price(@product) %></span>
  </p>
  <% end %>

  <% if @product.variants? %>
  <div id="product-variants">
    <h2><%= t('variants') %></h2>

    <ul>
      <% @product.variants.each do |v| %>
      <% next if v.option_values.empty? %>
      <li>
        <label>
          <input type="radio" name="variant[id]" value="<%= v.id %>" <%= @product.variants.first == v ? 'checked="checked"' : '' %> <%= 'disabled' unless v.in_stock or Spree::Config[:show_zero_stock_products]  %> />
          <%= variant_options v %>
          <% if variant_price_diff v %>
            <span class="price diff"><%= variant_price_diff v %></span>
          <% end %>
        </label>
      </li>
      <% end%>
    </ul>
  </div>

  <% else %>
    <input type="hidden" name="variant[id]" value="<%=@product.variants.first.id %>"/>
  <% end%>						

  <p><%=
    if @product.has_stock? || Spree::Config[:allow_backorders]
      submit_tag t('add_to_cart')
    else
      content_tag('strong', t('out_of_stock'))
    end
  %></p>

<% end %>
</div>
